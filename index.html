<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transaction Tracker</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#1976d2">
    <link rel="icon" sizes="192x192" href="icons/icon-192.png">
    <link rel="apple-touch-icon" href="icons/icon-192.png">
</head>
<body>
    <div id="customToaster"></div>
    <div id="customModal" class="modal-overlay is-hidden">
        <div class="modal-content">
            <button class="modal-close" aria-label="Close">&times;</button>
            <div class="modal-message"></div>
            <div class="modal-actions">
                <button class="modal-confirm btn btn-primary">Confirm</button>
                <button class="modal-cancel btn btn-secondary">Cancel</button>
            </div>
        </div>
    </div>
    <div class="container">
        <header>
            <h1>Transaction Tracker</h1>
            <div id="currentBalance"></div>
        </header>

        <main>
            <section class="transaction-form-section">
                <h2>Add Transaction</h2>
                <form id="transactionForm" class="transaction-form">
                    <div class="form-group">
                        <label for="date">Date:</label>
                        <input type="date" id="date" required>
                    </div>

                    <div class="form-group">
                        <label for="amount">Amount:</label>
                        <input type="number" id="amount" step="0.01" required placeholder="Enter amount">
                    </div>

                    <div class="form-group">
                        <label for="type">Type:</label>
                        <select id="type" required>
                                <option value="credit">Credit</option>
                                <option value="debit" selected>Debit</option>
                        </select>
                    </div>

                    <div class="form-group" id="categoryGroup">
                        <label for="category">Category:</label>
                        <select id="category">
                            <option value="">Select category</option>
                            <option value="breakfast">Breakfast</option>
                            <option value="lunch">Lunch</option>
                            <option value="dinner">Dinner</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="remarks">Remarks:</label>
                        <textarea id="remarks" placeholder="Optional remarks"></textarea>
                    </div>

                    <button type="submit" class="btn btn-primary">Add Transaction</button>
                </form>
            </section>

            <section class="transactions-section">
                <div class="section-header">
                    <h2>Recent Transactions</h2>
                    <div class="date-filter">
                        <label for="dateRange">Show transactions from:</label>
                        <select id="dateRange">
                            <option value="7">Last Week</option>
                            <option value="30">Last Month</option>
                            <option value="90">Last Quater</option>
                            <option value="365">Last year</option>
                            <option value="all">All time</option>
                        </select>
                    </div>
                </div>

                <div class="transactions-table-container">
                    <table id="transactionsTable" class="transactions-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Day</th>
                                <th>Amount</th>
                                <th>Type</th>
                                <th>Category</th>
                                <th>Remarks</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="transactionsBody"></tbody>
                    </table>
                    <div id="noTransactions" class="no-transactions">No transactions found</div>
                </div>

                <div class="action-buttons">
                    <button id="downloadExcelBtn" class="btn btn-secondary">Download Excel</button>
                    <button id="backupBtn" class="btn btn-secondary">Backup Data</button>
                    <button id="restoreBtn" class="btn btn-secondary">Restore Data</button>
                    <button id="clearBtn" class="btn btn-danger">Clear All Data</button>
                </div>
            </section>
        </main>

        <input type="file" id="restoreFile" accept=".json" class="is-hidden">
    </div>

        <script src="lib/date-utils.js"></script>
        <script src="lib/storage-service.js"></script>
        <script src="lib/transaction-service.js"></script>
        <script src="app.js"></script>
        <script>
            if ('serviceWorker' in navigator) {
                window.addEventListener('load', function() {
                    navigator.serviceWorker.register('service-worker.js');
                });
            }
        </script>
</body>
</html>
